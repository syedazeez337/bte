# BTE Test Scenario for ECMA-48 protocol compliance
# This tests SGR (Select Graphic Rendition) sequences

name: ecma48-protocol-test
description: Test ECMA-48 protocol compliance

# Note: This example demonstrates the BTE format.
# To test actual protocol compliance, use a terminal emulator test tool.
command: cat

steps:
  # Wait for protocol tester to be ready
  - action: wait_ticks
    ticks: 10

  # Simulate SGR sequence testing
  - action: send_keys
    keys: "\x1b[1m"  # Bold (SGR 1)

  - action: wait_ticks
    ticks: 5

  - action: send_keys
    keys: "\x1b[3m"  # Italic (SGR 3)

  - action: wait_ticks
    ticks: 5

  - action: send_keys
    keys: "\x1b[4m"  # Underline (SGR 4)

  - action: wait_ticks
    ticks: 5

  - action: send_keys
    keys: "\x1b[0m"  # Reset (SGR 0)

  - action: wait_ticks
    ticks: 5

  # Verify output contains expected sequences
  - action: assert_screen
    pattern: "\\x1b\\["
    anywhere: true

  # Quit
  - action: send_keys
    keys: "q\n"

invariants:
  - type: cursor_bounds
    description: Cursor stays within screen bounds
  - type: viewport_valid
    description: Viewport dimensions are valid
